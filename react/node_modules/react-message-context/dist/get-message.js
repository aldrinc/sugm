'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
var getIn = function getIn(messages, path) {
  if (typeof messages.getIn === 'function') {
    return messages.getIn(path);
  } else {
    var msg = messages;
    for (var i = 0; i < path.length; ++i) {
      msg = msg[path[i]];
      if (typeof msg === 'undefined') return undefined;
    }
    return msg;
  }
};

var getPath = function getPath(id, pathSep) {
  if (!id) return [];
  if (Array.isArray(id)) return id;
  return pathSep ? id.split(pathSep) : [id];
};

/**
 * @private
 * @param {object} messages
 * @param {string[]} locales
 * @param {string|string[]} [id]
 * @param {string} [pathSep]
 * @returns {any}
 */

exports.default = function (messages, locales, id, pathSep) {
  if (!messages) return undefined;
  var path = getPath(id, pathSep);
  if (locales.length === 0) return getIn(messages, path);
  path = [null].concat(path);
  for (var i = 0; i < locales.length; ++i) {
    path[0] = locales[i];
    var msg = getIn(messages, path);
    if (typeof msg !== 'undefined') return msg;
  }
  return undefined;
};